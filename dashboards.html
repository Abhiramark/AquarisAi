<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aquaris AI - Dashboards</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; background-color: #0d0d0d; color: white; }
.chart-container { background-color: #1a1a1a; padding: 1.5rem; border-radius: 1rem; margin: 2rem auto; width: 90%; max-width: 900px; border: 1px solid #333; }
select { padding: 0.5rem 1rem; border-radius: 0.5rem; background-color: #222; color: white; border: none; margin-right: 1rem; font-size: 1rem; }
header { font-size: 1.5rem; }
</style>
</head>
<body>

<header class="fixed top-0 left-0 w-full bg-gray-900 bg-opacity-90 backdrop-blur-sm z-50 border-b border-gray-700">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center relative">
        <a href="index.html" title="Back to Main Page"
           class="p-2 rounded-full hover:bg-gray-700 transition absolute left-4">
            <svg class="w-6 h-6 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
        </a>
        <div class="flex-grow text-center font-bold text-xl text-cyan-400">
            Aquaris AI - Visualisations
        </div>
    </div>
</header>

<main class="pt-28 text-center">
  <div class="mb-8">
    <label for="region">Select Region:</label>
    <select id="region">
      <option value="" disabled selected>Select Region</option>
      <option>Goa</option>
      <option>Chennai</option>
    </select>

    <label for="trend">Select Trend:</label>
    <select id="trend">
      <option value="" disabled selected>Select Trend</option>
      <option>Sea Surface Temperature</option>
      <option>Ocean Acidification</option>
      <option>Change in Ocean Currents</option>
      <option>Coral Reef Decline</option>
      <option>Microplastic Pollution</option>
      <option>Ecosystem Degradation</option>
    </select>
  </div>

  <div class="chart-container">
    <canvas id="trendChart"></canvas>
  </div>

  <div class="chart-container">
    <canvas id="polarChart"></canvas>
  </div>
</main>

<script>
Chart.register(ChartDataLabels);

const trendCtx = document.getElementById('trendChart').getContext('2d');
const polarCtx = document.getElementById('polarChart').getContext('2d');
let trendChart, polarChart;
let animationInterval;

const datasets = {
  'Goa': {
    'Sea Surface Temperature':[28.5,28.6,28.7,28.8,28.9,29,29.1,29.2,29.3,29.4],
    'Ocean Acidification':[8.1,8.12,8.11,8.1,8.09,8.08,8.07,8.06,8.05,8.04],
    'Change in Ocean Currents':[20,22,21,23,22,24,23,25,24,26],
    'Coral Reef Decline':[80,82,83,85,86,88,89,90,91,92],
    'Microplastic Pollution':[50,52,53,55,56,57,58,60,61,62],
    'Ecosystem Degradation':[40,42,43,44,45,46,47,48,49,50]
  },
  'Chennai': {
    'Sea Surface Temperature':[29.3,29.4,29.5,29.6,29.5,29.4,29.3,29.2,29.1,29],
    'Ocean Acidification':[8.0,8.01,8.02,8.03,8.02,8.01,8.0,7.99,7.98,7.97],
    'Change in Ocean Currents':[25,26,27,28,27,26,25,24,23,22],
    'Coral Reef Decline':[75,76,77,78,79,80,81,82,83,84],
    'Microplastic Pollution':[40,41,42,43,44,45,46,47,48,49],
    'Ecosystem Degradation':[35,36,37,38,39,40,41,42,43,44]
  }
};

const colors = {
  'Sea Surface Temperature':'#f97316',
  'Ocean Acidification':'#3b82f6',
  'Change in Ocean Currents':'#22c55e',
  'Coral Reef Decline':'#eab308',
  'Microplastic Pollution':'#ef4444',
  'Ecosystem Degradation':'#a855f7'
};

const polarFactors = {
  'Sea Surface Temperature':['Currents','Solar Radiation','Wind','Climate Index'],
  'Ocean Acidification':['CO₂ Levels','Temperature','Currents'],
  'Change in Ocean Currents':['Wind','Temperature','Salinity'],
  'Coral Reef Decline':['Temperature','Acidification','Microplastics','Ecosystem Degradation'],
  'Microplastic Pollution':['Currents','Human Activity','Wastewater','Tourism'],
  'Ecosystem Degradation':['Coral Decline','Microplastics','Acidification']
};

function createCharts(){
  trendChart = new Chart(trendCtx,{
    type:'line',
    data:{
      labels:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct'],
      datasets:[{ label:'', data:[], borderColor:'#06b6d4', backgroundColor:'rgba(6,182,212,0.2)', fill:true, tension:0.4, borderWidth:2, pointBackgroundColor:'white', pointBorderColor:'white', pointHoverRadius:6 }]
    },
    options:{
      responsive:true,
      animation:{duration:1000,easing:'linear'},
      scales:{
        x:{title:{display:true,text:'Month'},ticks:{color:'white'},grid:{color:'rgba(255,255,255,0.1)'}},
        y:{title:{display:true,text:'Value'},ticks:{color:'white'},grid:{color:'rgba(255,255,255,0.1)'}}
      },
      plugins:{legend:{labels:{color:'white'}}}
    }
  });

  polarChart = new Chart(polarCtx,{
    type:'polarArea',
    data:{ labels:[], datasets:[{ data:[], backgroundColor:[] }] },
    options:{
      responsive:true,
      animation:{duration:1000,easing:'linear'},
      plugins:{
        legend:{labels:{color:'white'}},
        datalabels:{
          color:'white',
          font:{ weight:'bold', size:14 },
          formatter:(value)=>Math.round(value),
          anchor:'center',
          align:'center'
        }
      }
    },
    plugins:[ChartDataLabels]
  });
}

createCharts();

document.getElementById('region').addEventListener('change', updateCharts);
document.getElementById('trend').addEventListener('change', updateCharts);

function updateCharts(){
  const region = document.getElementById('region').value;
  const trend = document.getElementById('trend').value;
  if(!region || !trend) return;
  clearInterval(animationInterval);

  // Update line chart
  trendChart.data.datasets[0].data = datasets[region][trend];
  trendChart.data.datasets[0].label = trend;
  trendChart.data.datasets[0].borderColor = colors[trend];
  trendChart.data.datasets[0].backgroundColor = colors[trend]+'33';
  trendChart.options.scales.y.title.text = trend;
  trendChart.update();

  // Update polar chart
  updatePolarChart(trend);

  // Gradual animation
  let i = 1;
  animationInterval = setInterval(()=>{
    if(i >= datasets[region][trend].length) i=0;

    // Line chart animation
    trendChart.data.datasets[0].data.push(datasets[region][trend][i]);
    trendChart.data.datasets[0].data.shift();
    trendChart.update();

    // Polar chart: small gradual changes
    polarChart.data.datasets[0].data = polarChart.data.datasets[0].data.map(val => {
        const change = (Math.random() * 2 - 1); // ±1
        let newVal = val + change;
        return newVal < 0 ? 0 : newVal;
    });
    polarChart.update();
    i++;
  },2000);
}

// Bright colors for polar chart segments
function updatePolarChart(trend){
  const factors = polarFactors[trend];
  const polarData = factors.map(()=> Math.floor(Math.random()*50)+10);
  const brightColors = [
    'rgba(255,99,132,0.7)',
    'rgba(54,162,235,0.7)',
    'rgba(255,206,86,0.7)',
    'rgba(75,192,192,0.7)',
    'rgba(153,102,255,0.7)',
    'rgba(255,159,64,0.7)',
    'rgba(0,255,255,0.7)'
  ];
  polarChart.data.labels = factors;
  polarChart.data.datasets[0].data = polarData;
  polarChart.data.datasets[0].backgroundColor = brightColors.slice(0,factors.length);
  polarChart.update();
}
</script>
</body>
</html>
